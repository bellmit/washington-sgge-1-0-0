<?xml version="1.0" encoding="UTF-8" ?>


<!-- create by system gera-java version 1.0.0 15/09/2017 13:1 : 5-->

<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ProcessoMap">
 <cache type="org.mybatis.caches.ehcache.LoggingEhcache"/>
 <cache type="org.mybatis.caches.ehcache.EhcacheCache"/>

  <!-- Result maps describe the mapping between the columns returned
      from a query, and the class properties.  A result map isnt
      necessary if the columns (or aliases) match to the properties
       exactly. -->
  <resultMap id="ProcessoResult" type="Processo">
    <result property="id" column="id"/>
    <result property="dataProcess" column="dataProcess"/>
    <result property="dataFim" column="dataFim"/>
    <result property="valor" column="valor"/>
    <result property="assunto" column="assunto"/>
    <result property="descricaoProc" column="descricaoProc"/>
    <result property="orgao" column="orgao"/>
    <result property="npadraocnj" column="npadraocnj"/>
    <result property="npadrao" column="npadrao"/>
    <result property="distribuido" column="distribuido"/>
    <result property="valorAcao" column="valorAcao"/>
    <result property="observacaoProc" column="observacaoProc"/>
    <result property="numeroprocesso" column="numeroprocesso"/>
    <result property="pasta" column="pasta"/>
    <result property="enviarEmail" column="enviarEmail"/>
    <result property="enviarMdgTelefone" column="enviarMdgTelefone"/>
    <result property="fundamentacaoJuridica" column="fundamentacaoJuridica"/>
    <result property="fatos" column="fatos"/>
    <result property="pretensoesCliente" column="pretensoesCliente"/>
    <result property="estrategia" column="estrategia"/>
    <result property="retringirProcesso" column="retringirProcesso"/>
<result property="parentId" column="parentId"/>
<result property="tabelaEnumValue" column="tabelaEnumValue"/>
<result property="emprId" column="emprId"/>
<result property="processId" column="processId"/>
<result property="createUser" column="create_user"/>
<result property="createDateUTC" column="create_date"/>
<result property="modifyUser" column="modify_user"/>
<result property="modifyDateUTC" column="modify_date"/>
<collection property="processo" column="processo"
			select="DoisValorMap.fetchDoisValorById" />
<collection property="quando" column="quando"
			select="DoisValorMap.fetchDoisValorById" />
		<collection property="justica" column="justica"
			select="DoisValorMap.fetchDoisValorById" />
		<collection property="tribunal" column="tribunal"
			select="DoisValorMap.fetchDoisValorById" />
		<collection property="instancia1" column="instancia1"
			select="DoisValorMap.fetchDoisValorById" />
		<collection property="localidade" column="localidade"
			select="DoisValorMap.fetchDoisValorById" />
		<collection property="capturpor" column="capturpor"
			select="DoisValorMap.fetchDoisValorById" />
		<collection property="acao" column="acao"
			select="DoisValorMap.fetchDoisValorById" />
		<collection property="situacao" column="situacao"
			select="DoisValorMap.fetchDoisValorById" />
		<collection property="instancia" column="instancia"
			select="DoisValorMap.fetchDoisValorById" />
		<collection property="capautomatica" column="capautomatica"
			select="DoisValorMap.fetchDoisValorById" />

		<collection property="tituloList" column="id"
			select="ContasReceberMap.fetchContasReceberByParentId" />

		<collection property="advogadoList" column="id"
			select="ProcessoClienteMap.fetchProcessoClienteByProcessoId" />

		<collection property="audienciaList" column="id"
			select="CompromissoMap.fetchCompromissoByParentId" />

		<collection property="processoStatusList" column="id"
			select="ProcessoStatusMap.fetchProcessoStatusByParentId" />

		<collection property="envolvList" column="id"
			select="EnvolvidosMap.fetchEnvolvidosByParentId" />

		<collection property="arquivos" column="id"
			select="ArquivoMap.fetchArquivoByProcessoId" />

		<collection property="envolvidosExterno" column="id"
			select="ParticipanteExternoMap.fetchParticipanteExternoByParentId" />

		<collection property="usuariosRestricaoProc" column="id"
			select="ProcessoUsuariosMap.fetchProcessoUsuariosByProcessoId" />
  </resultMap>

  <sql id="allProcessoColumns">
dataProcess
,dataFim
,valor
,acao
,assunto
,statusProc
,descricaoProc
,processo
,situacao
,instancia
,orgao
,npadraocnj
,npadrao
,agendarCap
,distribuido
,porcValorAcao
,valorAcao
,observacaoProc
,justica
,tribunal
,instancia1
,localidade
,capturpor
,numeroprocesso
,capautomatica
,pasta
,enviarEmail
,enviarMdgTelefone
,quando
,fundamentacaoJuridica
,fatos
,pretensoesCliente
,estrategia
,retringirProcesso
,parentId
,tabelaEnumValue
,emprId
,processId
,create_date
,create_user
,modify_date
,modify_user

</sql>
<sql id="allProcessoValues">
#{dataProcess},
#{dataFim},
#{valor},
#{acao.id},
#{assunto},
#{statusProc.id},
#{descricaoProc},
#{processo.id},
#{situacao.id},
#{instancia.id},
#{orgao},
#{npadraocnj},
#{npadrao},
#{agendarCap.id},
#{distribuido},
#{porcValorAcao},
#{valorAcao},
#{observacaoProc},
#{justica.id},
#{tribunal.id},
#{instancia1.id},
#{localidade.id},
#{capturpor.id},
#{numeroprocesso},
#{capautomatica.id},
#{pasta},
#{enviarEmail},
#{enviarMdgTelefone},
#{quando.id},
#{fundamentacaoJuridica},
#{fatos},
#{pretensoesCliente},
#{estrategia},
#{retringirProcesso},
     #{parentId},
     #{tabelaEnumValue},
     #{emprId},
     #{processId},
     #{createDateUTC},
     #{createUser},
     #{modifyDateUTC},
     #{modifyUser}
  </sql>


 <select id="fetchAllProcessos" resultMap="ProcessoResult">
    SELECT id,
 <include refid="allProcessoColumns" />
   FROM processo ORDER BY id ASC
 </select>

 <select id="fetchProcessoById" parameterType="Integer" resultMap="ProcessoResult">
    SELECT id,
 <include refid="allProcessoColumns" />
   FROM processo WHERE id = #{fetchid}
 </select>

 <select id="fetchAllProcessosRequest" parameterType="PagedInquiryRequest" resultMap="ProcessoResult">

     SELECT id,<include refid="allProcessoColumns" />
           FROM processo
           where 0 = 0
           <if test="permissaoTypeEnumValue == 1">
               and id IS NOT NULL
            </if>
           <if test="permissaoTypeEnumValue != 1">
               <if test="emprId == null">
                   <if test="emprIds != null">
                       and emprId in

                     <foreach item="item" index="index" collection="emprIds"
                          open="(" separator="," close=")">
                         #{item}
                     </foreach>

                 </if>
             </if>
               <if test="emprId != null"> and emprId = #{emprId}</if>
           </if>
           ORDER BY id ASC
</select>

<select id="fetchProcessoRowCount" resultType="Integer">
     SELECT COUNT(*) AS RECORD_COUNT FROM processo WHERE id IS NOT NULL <if test="emprId != null"> and emprId = emprId</if>

 </select>

 <insert id="insertProcesso" parameterType="Processo" useGeneratedKeys="true" keyProperty="id">
     INSERT INTO processo (
 <if test="id != null"><if test="id > 0">id,</if></if><include refid="allProcessoColumns" />
     )
   VALUES (<if test="id != null"><if test="id > 0">#{id},</if></if><include refid="allProcessoValues" /> )
 </insert>

 <update id="updateProcesso" parameterType="Processo">
   UPDATE processo SET
<if test="dataProcess!= null">dataProcess = #{dataProcess},</if>
<if test="dataFim!= null">dataFim = #{dataFim},</if>
<if test="valor!= null">valor = #{valor},</if>
<if test="acao!= null">acao = #{acao.id},</if>
<if test="assunto!= null">assunto = #{assunto},</if>
<if test="statusProc!= null">statusProc = #{statusProc.id},</if>
<if test="descricaoProc!= null">descricaoProc = #{descricaoProc},</if>
<if test="processo!= null">processo = #{processo.id},</if>
<if test="situacao!= null">situacao = #{situacao.id},</if>
<if test="instancia!= null">instancia = #{instancia.id},</if>
<if test="orgao!= null">orgao = #{orgao},</if>
<if test="npadraocnj!= null">npadraocnj = #{npadraocnj},</if>
<if test="npadrao!= null">npadrao = #{npadrao},</if>
<if test="agendarCap!= null">agendarCap = #{agendarCap.id},</if>
<if test="distribuido!= null">distribuido = #{distribuido},</if>
<if test="valorAcao!= null">valorAcao = #{valorAcao},</if>
<if test="observacaoProc!= null">observacaoProc = #{observacaoProc},</if>
<if test="justica!= null">justica = #{justica.id},</if>
<if test="tribunal!= null">tribunal = #{tribunal.id},</if>
<if test="instancia1!= null">instancia1 = #{instancia1.id},</if>
<if test="localidade!= null">localidade = #{localidade.id},</if>
<if test="capturpor!= null">capturpor = #{capturpor.id},</if>
<if test="numeroprocesso!= null">numeroprocesso = #{numeroprocesso},</if>
<if test="capautomatica!= null">capautomatica = #{capautomatica.id},</if>
<if test="pasta!= null">pasta = #{pasta},</if>
<if test="enviarEmail!= null">enviarEmail = #{enviarEmail},</if>
<if test="enviarMdgTelefone!= null">enviarMdgTelefone = #{enviarMdgTelefone},</if>
<if test="quando!= null">quando = #{quando.id},</if>
<if test="fundamentacaoJuridica!= null">fundamentacaoJuridica = #{fundamentacaoJuridica},</if>
<if test="fatos!= null">fatos = #{fatos},</if>
<if test="pretensoesCliente!= null">pretensoesCliente = #{pretensoesCliente},</if>
<if test="estrategia!= null">estrategia = #{estrategia},</if>
<if test="retringirProcesso!= null">retringirProcesso = #{retringirProcesso},</if>
<if test="parentId!= null"> parentId=#{parentId},</if>
<if test="tabelaEnumValue!= null"> tabelaEnumValue=#{tabelaEnumValue},</if>
<if test="emprId!= null"> emprId=#{emprId},</if>
<if test="processId!= null"> processId=#{processId},</if>
<if test="modifyDateUTC!= null"> modify_date=#{modifyDateUTC},</if>
<if test="modifyUser!= null"> modify_user=#{modifyUser}</if>
   WHERE
    id = #{id}
 </update>

<delete id="deleteProcessoById" parameterType="Processo">
  DELETE FROM processo WHERE id = #{id}
 </delete>

 <delete id="deleteAllProcessos">
 DELETE FROM processo
  </delete>
</mapper>


