<?xml version="1.0" encoding="UTF-8" ?>


<!-- create by system gera-java version 1.0.0 29/09/2016 9:45 : 13-->

<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="NFNotaInfoMap">
 <cache type="org.mybatis.caches.ehcache.LoggingEhcache"/>
 <cache type="org.mybatis.caches.ehcache.EhcacheCache"/>

  <!-- Result maps describe the mapping between the columns returned
      from a query, and the class properties.  A result map isnt
      necessary if the columns (or aliases) match to the properties
       exactly. -->
  <resultMap id="NFNotaInfoResult" type="NFNotaInfo">
  <result property="id" column="id"/>
    <result property="identificador" column="identificador"/>
    <result property="versao" column="versao"/>

<result property="parentId" column="parentId"/>
<result property="tabelaEnumValue" column="tabelaEnumValue"/>
<result property="emprId" column="emprId"/>
<result property="processId" column="processId"/>
<result property="createUser" column="create_user"/>
<result property="createDateUTC" column="create_date"/>
<result property="modifyUser" column="modify_user"/>
<result property="modifyDateUTC" column="modify_date"/>
<collection property="identificacao" column="identificacao" select="RegimeMap.fetchRegimeById"/>
    <collection property="emitente" column="emitente" select="RegimeMap.fetchRegimeById"/>
    <collection property="avulsa" column="avulsa" select="RegimeMap.fetchRegimeById"/>
    <collection property="destinatario" column="destinatario" select="RegimeMap.fetchRegimeById"/>
    <collection property="retirada" column="retirada" select="RegimeMap.fetchRegimeById"/>
    <collection property="entrega" column="entrega" select="RegimeMap.fetchRegimeById"/>
<collection property="pessoasautorizadasdownloadnfe" column="id" select="DocumentoMap.fetchDocumentoByEmpresa"/>
<collection property="itens" column="id" select="DocumentoMap.fetchDocumentoByEmpresa"/>
    <collection property="total" column="total" select="RegimeMap.fetchRegimeById"/>
    <collection property="transporte" column="transporte" select="RegimeMap.fetchRegimeById"/>
    <collection property="cobranca" column="cobranca" select="RegimeMap.fetchRegimeById"/>
<collection property="pagamentos" column="id" select="DocumentoMap.fetchDocumentoByEmpresa"/>
    <collection property="informacoesadicionais" column="informacoesadicionais" select="RegimeMap.fetchRegimeById"/>
    <collection property="exportacao" column="exportacao" select="RegimeMap.fetchRegimeById"/>
    <collection property="compra" column="compra" select="RegimeMap.fetchRegimeById"/>
    <collection property="cana" column="cana" select="RegimeMap.fetchRegimeById"/>
  </resultMap>

  <sql id="allNFNotaInfoColumns">
identificador
,versao
,identificacao
,emitente
,avulsa
,destinatario
,retirada
,entrega
,total
,transporte
,cobranca
,informacoesadicionais
,exportacao
,compra
,cana
,parentId
,tabelaEnumValue
,emprId
,processId
,create_date
,create_user
,modify_date
,modify_user

</sql>
<sql id="allNFNotaInfoValues">
#{identificador},
#{versao},
#{identificacao.id},
#{emitente.id},
#{avulsa.id},
#{destinatario.id},
#{retirada.id},
#{entrega.id},
#{total.id},
#{transporte.id},
#{cobranca.id},
#{informacoesadicionais.id},
#{exportacao.id},
#{compra.id},
#{cana.id},
     #{parentId},
     #{tabelaEnumValue},
     #{emprId},
     #{processId},
     #{createDateUTC},
     #{createUser},
     #{modifyDateUTC},
     #{modifyUser}
  </sql>


 <select id="fetchAllNFNotaInfos" resultMap="NFNotaInfoResult">
    SELECT id,
 <include refid="allNFNotaInfoColumns" />
   FROM nfnotainfo ORDER BY id ASC
 </select>

 <select id="fetchNFNotaInfoById" parameterType="Integer" resultMap="NFNotaInfoResult">
    SELECT id,
 <include refid="allNFNotaInfoColumns" />
   FROM nfnotainfo WHERE id = #{fetchid}
 </select>

 <select id="fetchAllNFNotaInfosRequest" parameterType="PagedInquiryRequest" resultMap="NFNotaInfoResult">

     SELECT id,<include refid="allNFNotaInfoColumns" />
           FROM nfnotainfo where 0 = 0 <if test="emprId != null"> and emprId = emprId</if> ORDER BY id ASC
       OFFSET ( #{startPage} * #{pageSize} )
       LIMIT #{pageSize}
</select>

<select id="fetchNFNotaInfoRowCount" resultType="Integer">
     SELECT COUNT(*) AS RECORD_COUNT FROM nfnotainfo WHERE id IS NOT NULL <if test="emprId != null"> and emprId = emprId</if>

 </select>

 <insert id="insertNFNotaInfo" parameterType="NFNotaInfo" useGeneratedKeys="true" keyProperty="id">
     INSERT INTO nfnotainfo (
 <if test="id != null"><if test="id > 0">id,</if></if><include refid="allNFNotaInfoColumns" />
     )
   VALUES (<if test="id != null"><if test="id > 0">#{id},</if></if><include refid="allNFNotaInfoValues" /> )
 </insert>

 <update id="updateNFNotaInfo" parameterType="NFNotaInfo">
   UPDATE nfnotainfo SET
<if test="identificador!= null">identificador = #{identificador},</if>
<if test="versao!= null">versao = #{versao},</if>
<if test="identificacao!= null">identificacao = #{identificacao.id},</if>
<if test="emitente!= null">emitente = #{emitente.id},</if>
<if test="avulsa!= null">avulsa = #{avulsa.id},</if>
<if test="destinatario!= null">destinatario = #{destinatario.id},</if>
<if test="retirada!= null">retirada = #{retirada.id},</if>
<if test="entrega!= null">entrega = #{entrega.id},</if>
<if test="total!= null">total = #{total.id},</if>
<if test="transporte!= null">transporte = #{transporte.id},</if>
<if test="cobranca!= null">cobranca = #{cobranca.id},</if>
<if test="informacoesadicionais!= null">informacoesadicionais = #{informacoesadicionais.id},</if>
<if test="exportacao!= null">exportacao = #{exportacao.id},</if>
<if test="compra!= null">compra = #{compra.id},</if>
<if test="cana!= null">cana = #{cana.id},</if>
<if test="parentId!= null"> parentId=#{parentId},</if>
<if test="tabelaEnumValue!= null"> tabelaEnumValue=#{tabelaEnumValue},</if>
<if test="emprId!= null"> emprId=#{emprId},</if>
<if test="processId!= null"> processId=#{processId},</if>
<if test="modifyDateUTC!= null"> modify_date=#{modifyDateUTC},</if>
<if test="modifyUser!= null"> modify_user=#{modifyUser}</if>
   WHERE
    id = #{id}
 </update>

<delete id="deleteNFNotaInfoById" parameterType="NFNotaInfo">
  DELETE FROM nfnotainfo WHERE id = #{id}
 </delete>

 <delete id="deleteAllNFNotaInfos">
 DELETE FROM nfnotainfo
  </delete>
</mapper>


