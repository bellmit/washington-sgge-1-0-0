<?xml version="1.0" encoding="UTF-8" ?>


<!-- create by system gera-java version 1.0.0 27/09/2016 14:55 : 12-->

<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="NotaFiscalMap">
 <cache type="org.mybatis.caches.ehcache.LoggingEhcache"/>
 <cache type="org.mybatis.caches.ehcache.EhcacheCache"/>

  <!-- Result maps describe the mapping between the columns returned
      from a query, and the class properties.  A result map isnt
      necessary if the columns (or aliases) match to the properties
       exactly. -->
  <resultMap id="NotaFiscalResult" type="NotaFiscal">
    <result property="id" column="id"/>
    <result property="serie" column="serie"/>
    <result property="ordem" column="ordem"/>
    <result property="numero" column="numero"/>
    <result property="tipo" column="tipo"/>
    <result property="nfValor" column="nfValor"/>
    <result property="dataEmissao" column="dataEmissao" />
    <result property="dataSaida" column="dataSaida" />
    <result property="dataEntrada" column="dataEntrada" />
    <result property="modelo" column="modelo"/>
    <result property="bxEstoque" column="bxEstoque"/>
    <result property="descItens" column="descItens"/>
    <result property="pcCusto" column="pcCusto"/>

<result property="parentId" column="parentId"/>
<result property="tabelaEnumValue" column="tabelaEnumValue"/>
<result property="emprId" column="emprId"/>
<result property="processId" column="processId"/>
<result property="createUser" column="create_user"/>
<result property="createDateUTC" column="create_date"/>
<result property="modifyUser" column="modify_user"/>
<result property="modifyDateUTC" column="modify_date"/>
    <collection property="cfop" column="cfop" select="RegimeMap.fetchRegimeById"/>
    <collection property="conhecimentoTransporte" column="conhecimentoTransporte" select="RegimeMap.fetchRegimeById"/>
    <collection property="empresa" column="empresa" select="RegimeMap.fetchRegimeById"/>
    <collection property="pessoa" column="pessoa" select="RegimeMap.fetchRegimeById"/>
<collection property="tributosList" column="id" select="DocumentoMap.fetchDocumentoByEmpresa"/>
<collection property="formaPagList" column="id" select="DocumentoMap.fetchDocumentoByEmpresa"/>
<collection property="notaFiscalItens" column="id" select="DocumentoMap.fetchDocumentoByEmpresa"/>
<collection property="noteList" column="id" select="DocumentoMap.fetchDocumentoByEmpresa"/>
<collection property="contasList" column="id" select="DocumentoMap.fetchDocumentoByEmpresa"/>
<collection property="itensEspeciais" column="id" select="DocumentoMap.fetchDocumentoByEmpresa"/>
<collection property="nfStatusList" column="id" select="DocumentoMap.fetchDocumentoByEmpresa"/>
  </resultMap>

  <sql id="allNotaFiscalColumns">
serie
,ordem
,numero
,tipo
,nfValor
,dataEmissao
,dataSaida
,dataEntrada
,modelo
,bxEstoque
,descItens
,pcCusto
,cfop
,conhecimentoTransporte
,empresa
,pessoa
,parentId
,tabelaEnumValue
,emprId
,processId
,create_date
,create_user
,modify_date
,modify_user

</sql>
<sql id="allNotaFiscalValues">
#{serie},
#{ordem},
#{numero},
#{tipo},
#{nfValor},
#{dataEmissao},
#{dataSaida},
#{dataEntrada},
#{modelo},
#{bxEstoque},
#{descItens},
#{pcCusto},
#{cfop.id},
#{conhecimentoTransporte.id},
#{empresa.id},
#{pessoa.id},
     #{parentId},
     #{tabelaEnumValue},
     #{emprId},
     #{processId},
     #{createDateUTC},
     #{createUser},
     #{modifyDateUTC},
     #{modifyUser}
  </sql>

 <insert id="insertNotaFiscal" parameterType="NotaFiscal" useGeneratedKeys="true" keyProperty="id">
     INSERT INTO notafiscal (
 <if test="id != null"><if test="id > 0">id,</if></if><include refid="allNotaFiscalColumns" />
     )
   VALUES (<if test="id != null"><if test="id > 0">#{id},</if></if><include refid="allNotaFiscalValues" /> )
 </insert>

 <update id="updateNotaFiscal" parameterType="NotaFiscal">
   UPDATE notafiscal SET
<if test="serie!= null">serie = #{serie},</if>
<if test="ordem!= null">ordem = #{ordem},</if>
<if test="numero!= null">numero = #{numero},</if>
<if test="tipo!= null">tipo = #{tipo},</if>
<if test="nfValor!= null">nfValor = #{nfValor},</if>
<if test="dataEmissao!= null">dataEmissao = #{dataEmissao},</if>
<if test="dataSaida!= null">dataSaida = #{dataSaida},</if>
<if test="dataEntrada!= null">dataEntrada = #{dataEntrada},</if>
<if test="modelo!= null">modelo = #{modelo},</if>
<if test="bxEstoque!= null">bxEstoque = #{bxEstoque},</if>
<if test="descItens!= null">descItens = #{descItens},</if>
<if test="pcCusto!= null">pcCusto = #{pcCusto},</if>
<if test="cfop!= null">cfop = #{cfop.id},</if>
<if test="conhecimentoTransporte!= null">conhecimentoTransporte = #{conhecimentoTransporte.id},</if>
<if test="empresa!= null">empresa = #{empresa.id},</if>
<if test="pessoa!= null">pessoa = #{pessoa.id},</if>
<if test="parentId!= null"> parentId=#{parentId},</if>
<if test="tabelaEnumValue!= null"> tabelaEnumValue=#{tabelaEnumValue},</if>
<if test="emprId!= null"> emprId=#{emprId},</if>
<if test="processId!= null"> processId=#{processId},</if>
<if test="modifyDateUTC!= null"> modify_date=#{modifyDateUTC},</if>
<if test="modifyUser!= null"> modify_user=#{modifyUser}</if>
   WHERE
    id = #{id}
 </update>

<delete id="deleteNotaFiscalById" parameterType="NotaFiscal">
  DELETE FROM notafiscal WHERE id = #{id}
 </delete>

 <delete id="deleteAllNotaFiscals">
 DELETE FROM notafiscal
  </delete>
</mapper>


